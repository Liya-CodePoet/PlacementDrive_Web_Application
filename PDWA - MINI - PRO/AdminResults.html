<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DRIVE REQUESTS</title>
    <link rel="stylesheet"href="">
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.7.2.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
   
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"/>
    </head>
    <style>
        .labs{
  display: inline-block;
  width: 100px;
  
}
body{
            background-color: white;
            margin:50px;
        }
        .labs{
  display: inline-block;
  width: 100px;
  
}
h4{
    margin-bottom: 20px;
    color: black;
    text-transform: uppercase;
    text-shadow: 0 0 5px teal;
    font-size: 25px;
    font-weight: 700;
}

.table{
    background-color: teal;
    color: white;
    font-weight: 500;
    border-radius: 8px;
    text-align:center;
    
}
table th{
    border-radius:5px ;
    background-color: rgb(10, 6, 6);
    text-align: center;
}

    </style>
    <body>
        <div class="container">
            <H4>SELECTED CANDIDATES</H4> 
            <div class="search">
                <input id="SearchBar" type="text" class="form-control" placeholder="Search" aria-label="Recipient's username" aria-describedby="basic-addon2" onkeyup="searchfunction()"><br>
                <div >
                    <!-- <button type="button"  class="btn btn-primary my-2" data-toggle="modal" data-target="#exampleModalCenter"> Add New Record </button> 
                    <button type="button"  class="btn btn-primary my-2" data-toggle="modal" data-target="#exampleModalCenter2"> Edit Record</button>  -->
                    <div>

                        <table class="table table-dark py-5">
                            <thread>
                                    <th>Sno</th>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Register No</th>
                                    <th>DriveID</th>
                                    <th>Company</th>
                                    <th>Department</th>
                                    <th>Year</th>
                            </thread>
                            <tbody id="tbody1"></tbody>
                        </table>
                        
        </div>

         <!-- Modal1 starts -->
         
            <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">

      <form class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLongTitle"> Control Panel</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        
        

        <div class="frame">
           
            <form action="" class="container">
               
               
                    <label class="labs"for="">Name:</label>
                    <input type="text" id="NameMod" required="required"><br>
               
                    <label   class="labs" for="">Email:</label>
                    <input type="text" id="EmailMod" required="required"><br>
               
               
                    <label class="labs" for=""> Register No:</label>
                    <input type="text" id="RegMod" required="required"><br>
                
                
                    <label class="labs" for=""> DriveID:</label>
                    <input type="text" id="DriveIDMod" required="required"><br>
               
                
                    <label class="labs" for=""> Company:</label>
                    <input type="text" id="CompanyMod" required="required"><br>
                
                
                    <label class="labs" for=""> Department:</label>
                    <input type="text" id="DeptMod" required="required"><br>
                
               
                    <label class="labs" for="">Year:</label>
                    <input type="text" id="YearMod" required="required"><br>
               
                
            
                <div class="modal-footer" >
                    <button id="insbtn" type="button"id="log-btn" class="btn btn-primary">Submit ‚úÖ</button>
                    <button type="submit"id="log-btn" class="btn btn-secondary">Clear ‚ùå</button>
                </div>
               
    
            </form>
        </div>
       
    </div> 
    
</div>
  </div>
<!-- model1 ends -->


 <!-- Modal2 starts -->
         
 <div class="modal fade" id="exampleModalCenter2" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">

      <form class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLongTitle"> Control Panel</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        
       

        <div class="frame">
           
            <form action="" class="container">
               
               
                    <label class="labs"for="">Name:</label>
                    <input type="text" id="NameMod1" required="required"><br>
               
                    <label   class="labs" for="">Email:</label>
                    <input type="text" id="EmailMod1" required="required"><br>
               
               
                    <label class="labs" for=""> Register No:</label>
                    <input type="text" id="RegMod1" required="required"><br>
                
                
                    <label class="labs" for=""> DriveID:</label>
                    <input type="text" id="DriveIDMod1" required="required"><br>
               
                
                    <label class="labs" for=""> Company:</label>
                    <input type="text" id="CompanyMod1" required="required"><br>
                
                
                    <label class="labs" for=""> Department:</label>
                    <input type="text" id="DeptMod1" required="required"><br>
                
               
                    <label class="labs" for="">Year:</label>
                    <input type="text" id="YearMod1" required="required"><br>
               
                
            
                <div class="modal-footer" >
                    <button id="Selbtn" type="button"id="log-btn" class="btn btn-primary">Search </button>
                    <button id="Updbtn" type="button"id="log-btn" class="btn btn-success">Update </button>
                    <button id="Delbtn" type="button"id="log-btn" class="btn btn-danger">Delete </button>
                    <button type="submit"id="log-btn" class="btn btn-secondary">Clear </button>
                </div>
               
    
            </form>
        </div>
       
    
    </div> 
    
</div>
  </div>
<!-- model2 ends -->


        <script type="module">

            import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.0/firebase-app.js";
      
      const firebaseConfig = {
        apiKey: "AIzaSyCf8TkfipanvrO0Z_FHT9cHv5LvR9ImFfM",
        authDomain: "placementdrive-c2866.firebaseapp.com",
        databaseURL: "https://placementdrive-c2866-default-rtdb.firebaseio.com",
        projectId: "placementdrive-c2866",
        storageBucket: "placementdrive-c2866.appspot.com",
        messagingSenderId: "798924021032",
        appId: "1:798924021032:web:0fcf61762dadde9c42841d"
      };
    
      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
 
    

        import { getDatabase, ref, set, child, get ,update,remove} 
        from "https://www.gstatic.com/firebasejs/9.17.0/firebase-database.js";


        const db = getDatabase();

        //--------------------------REFERENCES-----------------------------------------------------------------------------//
        
        const Sno=document.getElementById('sno');
        const Email =document.getElementById('Email');
        const Name=document.getElementById('Name');
        const RegisterNumber=document.getElementById('RegisterNumber');
        const DriveID=document.getElementById('DriveID');
        const Company=document.getAnimations('CompanyMod');
        const Department=document.getElementById('Department');
        const Year=document.getElementById('Year');
   
        var sno=0;
        var tbody=document.getElementById('tbody1');

        function AddItemToTable(Name,Email,RegisterNumber,DriveID,CompanyName,Department,Year){
          
          let trow = document.createElement("tr");
            let td0=document.createElement('td');
            let td1=document.createElement('td');
            let td2=document.createElement('td');
            let td3=document.createElement('td');
            let td4=document.createElement('td');
            let td5=document.createElement('td');
            let td6=document.createElement('td');
            let td7=document.createElement('td');
            td0.innerHTML= ++sno;
            td1.innerHTML= Name;
            td2.innerHTML= Email;
            td3.innerHTML=RegisterNumber;
            td4.innerHTML= DriveID;
            td5.innerHTML= CompanyName;
            td6.innerHTML= Department;
            td7.innerHTML= Year;
            trow.appendChild(td0);
            trow.appendChild(td1);
            trow.appendChild(td2);
            trow.appendChild(td3);
            trow.appendChild(td4);
            trow.appendChild(td5);
            trow.appendChild(td6);
            trow.appendChild(td7);
            tbody.appendChild(trow);
        }

        function AddAllItemsToTable(TheQuery){
            sno=0;
            tbody.innerHTML="";
            TheQuery.forEach(element => {
                AddItemToTable(element.Name, element.Email, element.RegisterNumber, element.DriveID, element.CompanyName, element.Department, element.Year);     
                   });
        }
        //getting all data
        function GetAllDataOnce(){
            const dbRef=ref(db);

            get(child(dbRef,"Results"))
            .then((snapshot)=>{

            var Student=[];

            snapshot.forEach(childSnapshot=> {
                Student.push(childSnapshot.val());
            });
            AddAllItemsToTable(Student);
            });
        }

       
        window.onload = GetAllDataOnce;

 
        //---------------------REFERENCES FOR MODEL WINDOW------------------------------------------------
        var NameMod=document.getElementById('NameMod');
        var EmailMod=document.getElementById('EmailMod');
        var RegMod=document.getElementById('RegMod');
        var DriveIDMod=document.getElementById('DriveIDMod');
        var CompanyMod=document.getElementById('CompanyMod');
        var DeptMod=document.getElementById('DeptMod');
        var YearMod=document.getElementById('YearMod');

        var NameMod1=document.getElementById('NameMod1');
        var EmailMod1=document.getElementById('EmailMod1');
        var RegMod1=document.getElementById('RegMod1');
        var DriveIDMod1=document.getElementById('DriveIDMod1');
        var CompanyMod1=document.getElementById('CompanyMod1');
        var DeptMod1=document.getElementById('DeptMod1');
        var YearMod1=document.getElementById('YearMod1');
            
        var insbtn=document.getElementById("insbtn");
       
        function InsertData()
            {
                set(ref(db, "Results/"+ NameMod.value),
                {
                Email:EmailMod.value,
              Name:NameMod.value,
              RegisterNumber:RegMod.value,
              DriveID:DriveIDMod.value,
              CompanyName:CompanyMod.value,
              Department:DeptMod.value,
              Year:YearMod.value

            })
                .then(()=>{
                alert("Data Stored Successfully üëç");
                })
                .catch((error)=>{
                alert("Unsuccessful, Error ü§Ø"+error);
            
                });
            }

        
            //--------------------Assign Events to Btns---------------------//
            insbtn.addEventListener("click",InsertData);
           


            ///-----------------------SEARCH-UPDATE-DELETE OPERATIONS------------------------------------------
            var selbtn=document.getElementById("Selbtn");
            var updbtn=document.getElementById("Updbtn");
            var delbtn=document.getElementById("Delbtn");


            //--------------------Search data function---------------------//
            function SelectData()
            {
                const dbref=ref(db);

                get(child(dbref,"Results/"+ NameMod1.value)).then((snapshot)=>{
                    if(snapshot.exists())
                    {
                        NameMod1.value=snapshot.val().Name;
                        EmailMod1.value=snapshot.val().Email;
                        RegMod1.value=snapshot.val().RegisterNumber;
                        DriveIDMod1.value=snapshot.val().DriveID;
                        CompanyMod1.value=snapshot.val().CompanyName;
                        DeptMod1.value=snapshot.val().Department;
                        YearMod1.value=snapshot.val().Year;


                    }
                    else{
                        alert("No Data found üßê");
                    }

                })
                .catch((error)=>
                {
                    alert("Unsuccessful, Error ü§Ø"+error);
                });
            }

            //--------------------Update data function---------------------//
            function UpdateData()
            {
                update(ref(db, "Results/"+ NameMod1.value),
                 {
                   
                   Name: NameMod1.value,
                   Email: EmailMod1.value,
                   RegisterNumber: RegMod1.value,
                   DriveID: DriveIDMod1.value,
                   CompanyName: CompanyMod1.value,
                   Department: DeptMod1.value,
                   Year: YearMod1.value

             })
                 .then(()=>{
                 alert("Data Updated Successfully üëç");
                 })
                 .catch((error)=>{
                 alert("Unsuccessful, Error ü§Ø"+error);
            
                 });
            }
 //--------------------Delete data function---------------------//
           
 function DeleteData()
            {
               remove(ref(db, "Results/"+ NameMod1.value)
            
            )
                 .then(()=>{
                 alert("Data Deleted Successfully üëç");
                 }) 
                 .catch((error)=>{
                 alert("Unsuccessful, Error ü§Ø"+error);
            
                 });
            }


            //--------------------Assign Events to Btns---------------------//
           
            selbtn.addEventListener("click",SelectData);
            updbtn.addEventListener("click",UpdateData);
            delbtn.addEventListener("click",DeleteData);

</script>
   <script>
 //------------------------- SEARCH BAR FUNCTION--------------------------------------------------//
    
const searchfunction=()=>
{
    let filter=document.getElementById("SearchBar").value.toUpperCase();
    let mytable =document.getElementById('tbody1');
    let tr =mytable.getElementsByTagName('tr');
    for(var i=0;i<tr.length;i++)
    {
        let td=tr[i].getElementsByTagName('td');
        for(j=0;j<td.length;j++)
        {
            if(td[j])
            {
                let textvalue=td[j].textContent || td[j].innerHTML;
               
                if(textvalue.toUpperCase().indexOf(filter)>-1)
                {
                    tr[i].style.display="";
                    break;
                }
                else
                {
                    tr[i].style.display="none";
                }
              }}}}
        </script>
    </body>
    </html>